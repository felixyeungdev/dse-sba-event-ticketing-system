<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>ETS</title>
        <link
            href="https://fonts.googleapis.com/css?family=Roboto"
            rel="stylesheet"
            type="text/css"
        />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- <script src="history_animate.js" defer></script> -->
        <script src="/chatbot_inject.js" defer></script>
        <link rel="stylesheet" href="index.css" />
        <link rel="stylesheet" href="/chatbot_inject.css" />
        <link rel="shortcut icon" href="favicon.png" type="image/x-icon" />
    </head>
    <body>
        <header class="header">
            <div class="brand-logo left">
                <img
                    class="logo"
                    src="http://dynamic.felixyeung2002.com/app/assets/icons/icon.svg"
                    alt=""
                    srcset=""
                />
                <span class="brand">ETS</span>
            </div>
            <div class="actions right">
                <a href="/app/">Launch App</a>
                <!-- <a href="">Login</a> -->
                <!-- <a href="">Register now</a> -->
            </div>
        </header>
        <main class="main">
            <h2 id="typewriter-container"></h2>
            <script src="typewriter.js"></script>
            <script defer>
                typewriter({
                    element: document.querySelector("#typewriter-container"),
                    prefix: "ETS",
                    strings: [
                        "is Event Ticketing System",
                        "has Beautiful UI",
                        "has Excellent UX",
                        "is Under Construction",
                    ],
                });
            </script>
            <h1>Tickets made easy</h1>
            <p>
                No matter what event you want to participate or organise, ETS
                lets you do that easily
            </p>
            <div class="buttons">
                <!-- <button id="download-android">Download for Android</button> -->
                <!-- <button id="launch-web">Open ETS in your browser</button> -->
            </div>
            <img
                class="undraw"
                src="undraw_events_2p66.svg"
                alt="Illustration from https://undraw.co/"
            />
        </main>
        <footer class="footer"></footer>
        <script>
            // Modified from https://stackoverflow.com/a/38241481
            function getOS() {
                var userAgent = window.navigator.userAgent,
                    platform = window.navigator.platform,
                    macosPlatforms = [
                        "Macintosh",
                        "MacIntel",
                        "MacPPC",
                        "Mac68K",
                    ],
                    windowsPlatforms = ["Win32", "Win64", "Windows", "WinCE"],
                    iosPlatforms = ["iPhone", "iPad", "iPod"],
                    os = null;

                if (macosPlatforms.indexOf(platform) !== -1) {
                    os = "macos";
                } else if (iosPlatforms.indexOf(platform) !== -1) {
                    os = "ios";
                } else if (windowsPlatforms.indexOf(platform) !== -1) {
                    os = "windows";
                } else if (/Android/.test(userAgent)) {
                    os = "android";
                } else if (!os && /Linux/.test(platform)) {
                    os = "linux";
                }

                return os;
            }

            const os = getOS();

            var links = {
                "#download-android": {
                    href: "/app/ETS-android.apk",
                    label: "Download for Android",
                },
                "#download-macos": {
                    href: "/app/ETS-macos.zip",
                    label: "Download for MacOS",
                },
                "#download-windows": {
                    href: "/app/ETS-windows.zip",
                    label: "Download for Windows",
                },
                "#launch-web": {
                    force: true,
                    href: "/app/",
                    label: "Open ETS in your browser",
                },
            };

            for (const key in links) {
                if (links.hasOwnProperty(key)) {
                    const force = links[key].force;
                    const display = force || key.includes(os);
                    if (display) {
                        const button = document.createElement("button");
                        button.id = key;
                        button.textContent = links[key].label;
                        button.textContent = links[key].label;
                        button.addEventListener("click", () => {
                            window.location.href = links[key].href;
                        });
                        document.querySelector(".buttons").append(button);
                    }
                }
            }
        </script>
    </body>
</html>
